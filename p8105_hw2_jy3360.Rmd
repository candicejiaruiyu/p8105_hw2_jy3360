---
title: "p8105_hw2_jy3360"
author: "Candice Yu"
date: "2023-09-26"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Problem 1
First, clean the data in pols-month.csv. 
- Use separate() to break up the variable mon into integer variables year, month, and day; 
- replace month number with month name; 
- create a president variable taking values gop and dem, 
- and remove prez_dem and prez_gop; and remove the day variable.

```{r}
library(tidyverse)
pols_month <- read_csv("fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(year = as.integer(year), day = as.integer(day)) %>%
  mutate(month = recode(month, `01` = "Jan", `02` = "Feb", `03` = "Mar", 
                        `04` = "Apr", `05` = "May", `06` = "June", 
                        `07` = "July", `08` = "Aug", `09` = "Sep", 
                        `10` = "Oct", `11` = "Nov", `12` = "Dec")) %>%
  pivot_longer(
    c(prez_gop, prez_dem),
    names_to = "politicians",
    names_prefix = "prez_",
    values_to = "president"
  ) %>%
  select(-"day")
```
Second, clean the data in snp.csv using a similar process to the above. For consistency across datasets, 
- arrange according to year and month, 
- and organize so that year and month are the leading columns.

```{r}
snp <- read_csv("fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  mutate(date = as.Date(date, format = "%m/%d/%y")) %>%
  separate(date, into = c("year", "month", "day"), sep = "-") %>%
  mutate(year = as.integer(year), day = as.integer(day), month = as.integer(month)) %>%
  arrange(year, month) %>%
  relocate(year, month) %>%
  mutate(month = recode(month, `01` = "Jan", `02` = "Feb", `03` = "Mar", 
                        `04` = "Apr", `05` = "May", `06` = "June", 
                        `07` = "July", `08` = "Aug", `09` = "Sep", 
                        `10` = "Oct", `11` = "Nov", `12` = "Dec")) %>%
  select(-"day")

```

Third, tidy the unemployment data so that it can be merged with the previous datasets. 
- This process will involve switching from “wide” to “long” format; 
- ensuring that key variables have the same name; 
- and ensuring that key variables take the same values.
```{r}
unemployment <- read_csv("fivethirtyeight_datasets/unemployment.csv") %>%
  pivot_longer(Jan:Dec, 
               names_to = "month",
               values_to = "unemployment"
               ) %>%
  janitor::clean_names()
```

Join the datasets by merging snp into pols, and merging unemployment into the result.
```{r}
data_1 <- left_join(pols_month, snp, by = c("year", "month")) %>%
  left_join(unemployment, by = c("year", "month"))
```


Write a short paragraph about these datasets. Explain briefly what each dataset contained, and describe the resulting dataset (e.g. give the dimension, range of years, and names of key variables).

Note: we could have used a date variable as a key instead of creating year and month keys; doing so would help with some kinds of plotting, and be a more accurate representation of the data. Date formats are tricky, though. For more information check out the lubridate package in the tidyverse.

- There are `r nrow(data_1)` rows and `r ncol(data_1)` columns in the dataset. 
- The years range from `r range(data_1$year)[1]` to `r range(data_1$year)[2]`.
- The key variables contain `r names(data_1)`.

